

### 策略设计器：以价格为核心，指标为辅助

我们将“触发器类型”的下拉菜单进行分组设计，明确地引导用户首先使用最直观的价格行为来构建策略。

---

#### 触发器构建器 V2.1: 分层分组设计

当用户点击“添加新触发器”时，在“**IF (条件)**”部分，他会看到一个这样的分组下拉菜单：

**--- 核心：基于价格行为的信号 ---** (默认展开，最常用)

1.  **价格连续涨跌 (Price Streak)**
    *   **描述**: 捕捉短期趋势或反转机会。
    *   **设置**: `如果` 价格连续 `上涨/下跌` [ `3` ] `个` [ `日` | `周` | `月` ]

2.  **价格创下新高/新低 (New High/Low)**
    *   **描述**: 基于支撑位和阻力位的突破信号。
    *   **设置**: `如果` 价格创下过去 [ `52` ] `个` [ `周` ] 的 `新高/新低`

3.  **价格从高点回撤 (Drawdown from Peak)**
    *   **描述**: 这是“越跌越买”最核心、最直观的量化。定义“打折”的程度。
    *   **设置**: `如果` 价格从过去 [ `60` ] `个` [ `交易日` ] 的最高点 `下跌超过` [ `15` ] `%`

4.  **价格在周期内涨跌幅 (Period Return)**
    *   **描述**: 衡量近期市场的波动强度。
    *   **设置**: `如果` 价格在过去 [ `20` ] `个` [ `交易日` ] 内 `上涨/下跌超过` [ `10` ] `%`

**--- 辅助：基于技术指标的信号 ---** (可折叠，高级选项)

1.  **相对强弱指数 (RSI)**
    *   **描述**: 判断市场是否处于“超买”或“超卖”状态。
    *   **设置**: `如果` [ `14` ] `周期` 的 RSI `高于/低于` [ `70 / 30` ]

2.  **移动平均线 (MA)**
    *   **描述**: 判断价格与长期趋势的关系。
    *   **设置**: `如果` 收盘价 `高于/低于` [ `200` ] `周期` 的移动平均线

3.  **布林带 (Bollinger Bands)**
    *   **描述**: 衡量价格的相对高低和波动性。
    *   **设置**: `如果` 价格 `触及/突破` 布林带的 `上轨/下轨`

4.  **平滑异同移动平均线 (MACD)**
    *   **描述**: 识别趋势的变化和动能。
    *   **设置**: `如果` MACD 出现 `金叉/死叉`

**--- 其他：基于时间的信号 ---** (保留作为基础选项)

1.  **固定时间周期 (Fixed Period)**
    *   **描述**: 用于实现传统的“定时定额”策略，方便对比。
    *   **设置**: `在每个` [ `月` ] `的第一个交易日`

---

### 这种设计的优势

1.  **用户引导性强**:
    *   默认展示和强调的是“价格行为信号”，这符合 80% 用户的直觉。他们不需要懂什么是 RSI 或布林带，也能轻松构建出“连跌3天就买”、“比高点跌了20%就加仓”这类强大的策略。

2.  **回归投资常识**:
    *   策略的构建基于“打折时买入，高估时卖出”这一朴素的商业常识，而不是复杂的数学公式，让用户对自己设计的策略更有信心。

3.  **保持了扩展性**:
    *   对于希望进行更精细化分析的进阶用户，“技术指标”部分提供了一个强大的武器库，但它被清晰地标记为“辅助”和“高级”选项，不会对新手造成干扰。

### 工作流程示例（纯价格策略）

**小明想设计一个“金字塔式抄底”策略，完全不使用技术指标。**

1.  **设置初始资金**: 20000 元。

2.  **添加触发器 1 (轻度回调，小额买入)**:
    *   **IF**: `价格从过去 60 个交易日 的最高点 下跌超过 10 %`
    *   **THEN**: `买入` `1000 元`
    *   **冷却期**: 20个交易日

3.  **添加触发器 2 (深度回调，大额加仓)**:
    *   **IF**: `价格从过去 250 个交易日 的最高点 下跌超过 25 %`
    *   **THEN**: `买入` `可用现金的 30%`
    *   **冷却期**: 40个交易日

4.  **添加触发器 3 (获利了结)**:
    *   **IF**: `价格创下过去 250 个交易日 的新高`
    *   **THEN**: `卖出` `持仓的 10%`
    *   **冷却期**: 60个交易日

**结果**:
小明设计的这个策略，逻辑非常清晰，完全基于价格的“折扣”程度来决定买入行为，符合价值投资的核心思想。回测时，这个策略将在市场的不同回调深度自动执行不同力度的买入，并在市场情绪高涨、创下新高时自动锁定部分利润。

这个以价格为核心，指标为辅助的设计，完美地平衡了易用性和专业性，完全符合您的要求。