```
import React, { useState, useEffect, useRef } from 'react';
import { 
  ArrowRight, 
  Zap, 
  Database, 
  BarChart3, 
  TrendingUp, 
  Code,
  Shield,
  Play,
  Cpu,
  Layers,
  Workflow,
  CheckCircle2,
  GitMerge,
  Settings2
} from 'lucide-react';

// --- UI Components ---

const Button = ({ children, variant = 'primary', size = 'default', className = '', ...props }) => {
  const baseStyles = "inline-flex items-center justify-center rounded-xl font-bold transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none";
  
  const variants = {
    primary: "bg-gradient-to-r from-[#84cc16] to-[#059669] hover:from-[#65a30d] hover:to-[#047857] text-white shadow-xl shadow-lime-200/50 hover:scale-105 hover:shadow-2xl hover:shadow-emerald-300/50 active:scale-95",
    outline: "bg-white border-2 border-slate-100 text-slate-600 hover:border-emerald-200 hover:text-emerald-700 hover:bg-emerald-50/50"
  };

  const sizes = {
    default: "h-10 px-4 py-2 text-sm",
    lg: "h-14 px-8 text-base",
  };

  return (
    <button 
      className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${className}`}
      {...props}
    >
      {children}
    </button>
  );
};

const GoogleIcon = () => (
  <svg className="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.347.533 12S5.867 24 12.48 24c3.44 0 6.013-1.133 8.053-3.24 2.08-2.16 2.72-5.333 2.72-8.24 0-.8-.08-1.48-.227-1.6H12.48z" />
  </svg>
);

// --- Helper: CountDown Animation (For Speed Slide) ---
const CountDown = ({ from = 10, to = 1.2, duration = 800 }) => {
  const [val, setVal] = useState(from);
  
  useEffect(() => {
    let startTime;
    let animationFrame;

    const animate = (time) => {
      if (!startTime) startTime = time;
      const progress = Math.min((time - startTime) / duration, 1);
      const easeProgress = 1 - Math.pow(1 - progress, 3);
      
      const currentVal = from - (from - to) * easeProgress;
      setVal(currentVal);

      if (progress < 1) {
        animationFrame = requestAnimationFrame(animate);
      }
    };

    animationFrame = requestAnimationFrame(animate);
    return () => cancelAnimationFrame(animationFrame);
  }, [from, to, duration]);

  return <>{val.toFixed(1)}</>;
};

// --- Helper: CountUp Animation (For Dashboard Slide) ---
const CountUp = ({ from = 0, to = 100, duration = 2000, prefix = '', suffix = '' }) => {
  const [val, setVal] = useState(from);
  
  useEffect(() => {
    let startTime;
    let animationFrame;

    const animate = (time) => {
      if (!startTime) startTime = time;
      const progress = Math.min((time - startTime) / duration, 1);
      // Ease out cubic for natural growth feel
      const easeProgress = 1 - Math.pow(1 - progress, 3);
      
      const currentVal = from + (to - from) * easeProgress;
      setVal(currentVal);

      if (progress < 1) {
        animationFrame = requestAnimationFrame(animate);
      }
    };

    animationFrame = requestAnimationFrame(animate);
    return () => cancelAnimationFrame(animationFrame);
  }, [from, to, duration]);

  return <>{prefix}{Math.floor(val)}{suffix}</>;
};

// --- Data: Slides Configuration ---

const slides = [
  {
    id: 'intro',
    badge: 'VestLab ETF ç­–ç•¥è®¾è®¡å™¨',
    title: (
      <>
        <span className="block text-slate-900">æ‹’ç»å‡­æ„Ÿè§‰ï¼Œ</span>
        <span className="bg-clip-text text-transparent bg-gradient-to-r from-[#84cc16] to-[#059669]">
          ç”¨æ•°æ®è¯´è¯
        </span>
      </>
    ),
    desc: "å°†æ‚¨çš„â€œæŠ„åº•ç›´è§‰â€è½¬åŒ–ä¸ºå¯éªŒè¯çš„æŠ•èµ„ç­–ç•¥ã€‚æ— éœ€ä»£ç ï¼Œåˆ©ç”¨å…¨çƒè¾¹ç¼˜ç½‘ç»œï¼Œå‡ ç§’é’Ÿå†…å®Œæˆåå¹´å†å²å›æµ‹ã€‚",
    icon: Layers,
    visualType: 'dashboard'
  },
  {
    id: 'triggers',
    badge: 'â™¾ï¸ æ— é™å¯èƒ½çš„è§¦å‘å™¨',
    title: (
      <>
        <span className="block text-slate-900">ç®€å•çš„ç§¯æœ¨ï¼Œ</span>
        <span className="bg-clip-text text-transparent bg-gradient-to-r from-teal-500 to-emerald-600">
          æ­å»ºå¤æ‚çš„é€»è¾‘
        </span>
      </>
    ),
    desc: "å†…ç½® RSI, MACD, å‡çº¿ç­‰ 50+ ç§æŠ€æœ¯æŒ‡æ ‡ã€‚æ”¯æŒâ€œä¸”/æˆ–â€å¤šé‡é€»è¾‘åµŒå¥—ã€‚æ— è®ºæ˜¯ç®€å•çš„å®šæŠ•ï¼Œè¿˜æ˜¯å¤æ‚çš„ç½‘æ ¼äº¤æ˜“ï¼Œéƒ½èƒ½åƒæ­ç§¯æœ¨ä¸€æ ·å®ç°ã€‚",
    icon: Settings2,
    visualType: 'triggers'
  },
  {
    id: 'builder',
    badge: 'âœ¨ æ„å›¾å¯¼å‘æ„å»º',
    title: (
      <>
        <span className="block text-slate-900">å‘Šåˆ«æ™¦æ¶©å‚æ•°ï¼Œ</span>
        <span className="bg-clip-text text-transparent bg-gradient-to-r from-lime-500 to-lime-600">
          åƒå¡«ç©ºä¸€æ ·ç®€å•
        </span>
      </>
    ),
    desc: "ä¸éœ€è¦æ‡‚ç¼–ç¨‹ã€‚è‡ªç„¶è¯­è¨€äº¤äº’ï¼šâ€œå¦‚æœè·Œäº† 15%ï¼Œå°±ä¹°å…¥ 1000 å…ƒâ€ã€‚æ‰€è§å³æ‰€å¾—ï¼Œé…ç½®ç­–ç•¥ä»æœªå¦‚æ­¤ç›´è§‚ã€‚",
    icon: Code,
    visualType: 'builder'
  },
  {
    id: 'backtest',
    badge: 'ğŸš€ æé€Ÿå›æµ‹å¼•æ“',
    title: (
      <>
        <span className="block text-slate-900">åå¹´çš„è¡Œæƒ…ï¼Œ</span>
        <span className="bg-clip-text text-transparent bg-gradient-to-r from-sky-500 to-blue-600">
          åªéœ€å‡ ç§’é’ŸéªŒè¯
        </span>
      </>
    ),
    desc: "åŸºäº Cloudflare å…¨çƒè¾¹ç¼˜ç½‘ç»œï¼Œæ¯«ç§’çº§è¿ç®—ã€‚æ‹’ç»æ¼«é•¿ç­‰å¾…ï¼Œè®©æ‚¨çš„çµæ„Ÿå³åˆ»å¾—åˆ°æ•°æ®çš„åé¦ˆã€‚",
    icon: Zap,
    visualType: 'speed'
  },
  {
    id: 'analytics',
    badge: 'ğŸ“Š æ·±åº¦å¯è§†åŒ–',
    title: (
      <>
        <span className="block text-slate-900">ä¸€å›¾èƒœåƒè¨€ï¼Œ</span>
        <span className="bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-pink-600">
          å¤ç›˜æ¯ä¸€æ¬¡å†³ç­–
        </span>
      </>
    ),
    desc: "å‡€å€¼æ›²çº¿å¯¹æ¯”ã€ä¹°å–ç‚¹æ ‡è®°ã€æœ€å¤§å›æ’¤é€è§†ã€‚ä¸ä»…çœ‹èµšäº†å¤šå°‘ï¼Œæ›´çœ‹æ˜¯æ€ä¹ˆèµšçš„ï¼ŒåŒºåˆ†è¿æ°”ä¸å®åŠ›ã€‚",
    icon: BarChart3,
    visualType: 'analytics'
  },
  {
    id: 'risk',
    badge: 'ğŸ›¡ï¸ æ™ºèƒ½é£æ§',
    title: (
      <>
        <span className="block text-slate-900">è¿›å¯æ”»ï¼Œ</span>
        <span className="bg-clip-text text-transparent bg-gradient-to-r from-orange-500 to-red-500">
          é€€å¯å®ˆ
        </span>
      </>
    ),
    desc: "å†…ç½®å†·å´æœŸæœºåˆ¶ä¸åŠ¨æ€ä»“ä½ç®¡ç†ã€‚é˜²æ­¢åœ¨ä¸‹è·Œé€”ä¸­è¿‡æ—©æ‰“å…‰å­å¼¹ï¼Œä¸ºæ‚¨å¯»æ‰¾é£é™©æ”¶ç›Šæ¯”æœ€ä¼˜çš„å¹³è¡¡ç‚¹ã€‚",
    icon: Shield,
    visualType: 'risk'
  }
];

// Reusable Scrolling Text Component
const DataStream = ({ speed, opacity, direction = 'normal', color = 'text-emerald-500' }) => {
  const dataString = "QQQ 345.20 â–² +1.2%  NVDA 450.00 â–² +2.4%  SPY 410.50 â–¼ -0.5%  AAPL 175.30 â–² +0.8%  MSFT 320.10 â–² +1.1%  TSLA 240.50 â–¼ -1.2%  GOOGL 135.20 â–² +0.5%  AMZN 130.40 â–² +0.9%  ";
  
  return (
    <div className={`flex whitespace-nowrap overflow-hidden font-mono text-[10px] ${color}`} style={{ opacity }}>
      <div className={`animate-scroll flex ${direction === 'reverse' ? 'animate-reverse' : ''}`} style={{ animationDuration: `${speed}s` }}>
        <span className="mx-4">{dataString}</span>
        <span className="mx-4">{dataString}</span>
        <span className="mx-4">{dataString}</span>
        <span className="mx-4">{dataString}</span>
      </div>
    </div>
  );
};

export default function App() {
  const [currentSlideIndex, setCurrentSlideIndex] = useState(0);
  const [isPaused, setIsPaused] = useState(false);

  const currentSlide = slides[currentSlideIndex];

  // Auto-advance logic
  useEffect(() => {
    if (isPaused) return;
    
    // Increased to 4.5s to allow animations to finish
    const timer = setInterval(() => {
      setCurrentSlideIndex((prev) => (prev + 1) % slides.length);
    }, 4500);

    return () => clearInterval(timer);
  }, [isPaused]);

  const handleStart = () => {
    alert("ç‚¹å‡»äº†å¼€å§‹éªŒè¯æŒ‰é’®");
  };

  return (
    <div className="relative min-h-screen flex items-center overflow-hidden bg-slate-50 font-sans selection:bg-lime-200 selection:text-emerald-900">
      
      {/* --- Background Elements --- */}
      <div 
        className="absolute inset-0 z-0 pointer-events-none opacity-20" 
        style={{
          backgroundImage: 'linear-gradient(#cbd5e1 1px, transparent 1px), linear-gradient(90deg, #cbd5e1 1px, transparent 1px)',
          backgroundSize: '40px 40px'
        }}
      />
      <div className="absolute -top-24 -left-24 w-96 h-96 bg-lime-200 rounded-full blur-[100px] opacity-40 -z-10 animate-float-slow" />
      <div className="absolute top-1/2 right-0 w-[500px] h-[500px] bg-emerald-200 rounded-full blur-[120px] opacity-30 -z-10 animate-float-slower" />


      <div className="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center relative z-10 py-12 lg:py-0 min-h-[600px]">
        
        {/* --- LEFT COLUMN: Text Carousel --- */}
        <div 
          className="space-y-8 text-left transition-all duration-500"
          onMouseEnter={() => setIsPaused(true)}
          onMouseLeave={() => setIsPaused(false)}
        >
          {/* Badge Transition */}
          <div key={`badge-${currentSlide.id}`} className="inline-flex items-center gap-2 px-3 py-1 bg-white border border-slate-200 rounded-full shadow-sm animate-slide-in-stagger" style={{animationDelay: '0ms'}}>
            <span className="relative flex h-2 w-2">
              <span className={`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${currentSlide.id === 'risk' ? 'bg-red-400' : 'bg-lime-400'}`}></span>
              <span className={`relative inline-flex rounded-full h-2 w-2 ${currentSlide.id === 'risk' ? 'bg-red-500' : 'bg-lime-500'}`}></span>
            </span>
            <span className="text-xs font-bold text-slate-600 tracking-wide uppercase">{currentSlide.badge}</span>
          </div>

          {/* Title & Desc Transition with Stagger */}
          <div key={`text-${currentSlide.id}`} className="space-y-6 min-h-[200px]">
            <h1 className="text-5xl md:text-6xl font-extrabold tracking-tight leading-[1.1] animate-slide-in-stagger" style={{animationDelay: '150ms'}}>
              {currentSlide.title}
            </h1>
            <p className="text-lg text-slate-600 leading-relaxed max-w-lg animate-slide-in-stagger" style={{animationDelay: '300ms'}}>
              {currentSlide.desc}
            </p>
          </div>

          {/* Progress Indicators (Clickable) */}
          <div className="flex items-center gap-2 mb-4">
             {slides.map((slide, idx) => (
               <button
                 key={slide.id}
                 onClick={() => setCurrentSlideIndex(idx)}
                 className={`h-1.5 rounded-full transition-all duration-500 ${
                   idx === currentSlideIndex ? 'w-8 bg-emerald-500' : 'w-2 bg-slate-300 hover:bg-slate-400'
                 }`}
                 aria-label={`Go to slide ${idx + 1}`}
               />
             ))}
          </div>

          {/* Constant CTA Actions (Always visible, no re-anim) */}
          <div className="flex flex-col sm:flex-row gap-4 pt-2 animate-fade-in" style={{animationDelay: '500ms'}}>
            <Button size="lg" onClick={handleStart} className="flex items-center gap-2">
              <GoogleIcon />
              ç«‹å³å¼€å§‹éªŒè¯
              <ArrowRight className="w-4 h-4 opacity-80" />
            </Button>
          </div>
        </div>

        {/* --- RIGHT COLUMN: Dynamic 3D Visuals --- */}
        <div 
           className="relative hidden lg:flex items-center justify-center group cursor-pointer" 
           style={{ perspective: '2000px' }}
           onMouseEnter={() => setIsPaused(true)}
           onMouseLeave={() => setIsPaused(false)}
        >
          
          {/* The 3D Wrapper */}
          <div 
            className="relative w-full max-w-[600px] aspect-[4/3] transition-all duration-700 ease-out transform preserve-3d group-hover:rotate-x-0 group-hover:rotate-y-0 group-hover:scale-100"
            style={{ 
              transformStyle: 'preserve-3d',
              transform: 'rotateY(-12deg) rotateX(5deg) scale(0.95)' 
            }}
          >
            {/* Background Glow */}
            <div className={`absolute inset-0 bg-gradient-to-tr rounded-[2rem] opacity-20 blur-3xl -z-10 transition-colors duration-1000 ${
              currentSlide.visualType === 'risk' ? 'from-orange-400 to-red-500' : 
              currentSlide.visualType === 'backtest' ? 'from-blue-400 to-indigo-500' : 
              currentSlide.visualType === 'triggers' ? 'from-teal-400 to-emerald-500' :
              currentSlide.visualType === 'analytics' ? 'from-purple-400 to-indigo-500' :
              currentSlide.visualType === 'builder' ? 'from-lime-400 to-green-500' :
              'from-lime-400 to-emerald-500'
            }`} />

            {/* Main Card Container */}
            <div className={`absolute inset-0 rounded-2xl shadow-2xl border overflow-hidden flex flex-col transition-all duration-500 ${currentSlide.visualType === 'speed' ? 'bg-slate-950 border-slate-800' : 'bg-white border-slate-100'}`}>
              
              {/* Header (Hidden for Speed Matrix Mode to maximize space, or styled differently) */}
              <div className={`h-14 border-b flex items-center justify-between px-6 ${currentSlide.visualType === 'speed' ? 'bg-slate-900/50 border-slate-800' : 'bg-slate-50/50 border-slate-100'}`}>
                <div className="flex gap-2">
                   {/* Traffic Lights */}
                  <div className="w-3 h-3 rounded-full bg-red-400" />
                  <div className="w-3 h-3 rounded-full bg-amber-400" />
                  <div className="w-3 h-3 rounded-full bg-green-400" />
                </div>
                <div className={`text-xs font-mono flex items-center gap-2 ${currentSlide.visualType === 'speed' ? 'text-emerald-500' : 'text-slate-400'}`}>
                  <currentSlide.icon className="w-3 h-3" />
                  VestLab_{currentSlide.id.toUpperCase()}.exe
                </div>
              </div>

              {/* Dynamic Content Area based on visualType */}
              <div className="p-6 flex-1 flex flex-col gap-4 justify-center relative overflow-hidden">
                
                {/* --- 1. DEFAULT DASHBOARD VISUAL (UPDATED: CountUp) --- */}
                {currentSlide.visualType === 'dashboard' && (
                  <div className="animate-fade-in w-full h-full flex items-center justify-center relative">
                     {/* Financial Grid Background */}
                     <div className="absolute inset-0 z-0" style={{ 
                        backgroundImage: 'linear-gradient(#e2e8f0 1px, transparent 1px), linear-gradient(90deg, #e2e8f0 1px, transparent 1px)', 
                        backgroundSize: '24px 24px',
                        opacity: 0.6
                     }}></div>

                     {/* Floating Stats with CountUp */}
                     <div className="absolute top-0 left-0 animate-fade-in-up z-20">
                         <div className="text-5xl font-black text-emerald-500 tracking-tighter bg-white/60 backdrop-blur-sm px-2 rounded-lg border border-white/50 shadow-sm">
                            <CountUp from={0} to={428} duration={3000} prefix="+" suffix="%" />
                         </div>
                         <div className="text-xs font-bold text-slate-400 tracking-widest pl-3 mt-1">ALL TIME HIGH</div>
                     </div>

                     {/* The Bold Line Chart & Following Arrow */}
                     <svg className="w-full h-full overflow-visible relative z-10" viewBox="0 0 400 300">
                        <defs>
                            <linearGradient id="growthGradient" x1="0" y1="0" x2="1" y2="0">
                                <stop offset="0%" stopColor="#84cc16" />
                                <stop offset="100%" stopColor="#059669" />
                            </linearGradient>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        {/* The Path Definition */}
                        <path 
                            id="trendPath"
                            d="M0,250 C100,240 150,260 200,180 S300,100 380,50" 
                            fill="none" 
                            stroke="url(#growthGradient)" 
                            strokeWidth="12" 
                            strokeLinecap="round"
                            className="animate-draw-line"
                            filter="url(#glow)"
                            strokeDasharray="600"
                            strokeDashoffset="0"
                        />
                        
                        {/* The Moving Arrow Group */}
                        <g className="animate-follow-path" style={{ 
                            offsetPath: 'path("M0,250 C100,240 150,260 200,180 S300,100 380,50")',
                            offsetRotate: 'auto'
                        }}>
                             <g style={{ transform: 'rotate(0deg) translate(-5px, 0)' }}>
                                <path d="M-10,10 L10,0 L-10,-10" fill="none" stroke="#059669" strokeWidth="8" strokeLinecap="round" strokeLinejoin="round" />
                                <circle cx="0" cy="0" r="8" fill="#10b981" className="animate-ping opacity-75" />
                             </g>
                        </g>
                     </svg>
                  </div>
                )}

                 {/* --- 2. TRIGGERS VISUAL --- */}
                {currentSlide.visualType === 'triggers' && (
                  <div className="animate-fade-in h-full bg-slate-50 rounded-lg p-6 flex flex-col justify-center gap-6 relative overflow-hidden">
                     
                     <div className="absolute inset-0 opacity-5" style={{ 
                        backgroundImage: 'radial-gradient(circle at 2px 2px, #64748b 1px, transparent 0)', 
                        backgroundSize: '20px 20px' 
                     }}></div>

                     {/* 1. RSI Knob */}
                     <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between animate-slide-in-right" style={{animationDelay: '0ms'}}>
                        <div>
                           <div className="text-[10px] text-slate-400 font-bold tracking-wider">RSI PERIOD</div>
                           <div className="relative h-8 w-16 overflow-hidden">
                              <div className="text-2xl font-mono font-bold text-slate-700 absolute top-0 left-0 animate-value-switch">14</div>
                              <div className="text-2xl font-mono font-bold text-emerald-600 absolute top-0 left-0 animate-value-switch-alt opacity-0">15</div>
                           </div>
                        </div>
                        <div className="relative w-12 h-12 rounded-full bg-slate-100 border border-slate-300 flex items-center justify-center shadow-inner">
                           <div className="w-full h-full rounded-full animate-knob-turn shadow-sm">
                              <div className="w-1.5 h-3 bg-emerald-500 rounded-full mx-auto mt-1"></div>
                           </div>
                        </div>
                     </div>

                     {/* 2. Stop Loss Slider */}
                     <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200 animate-slide-in-right" style={{animationDelay: '100ms'}}>
                        <div className="flex justify-between mb-2">
                           <div className="text-[10px] text-slate-400 font-bold tracking-wider">STOP LOSS</div>
                           <div className="font-mono font-bold text-red-500 animate-pulse">-8.5%</div>
                        </div>
                        <div className="h-2 bg-slate-100 rounded-full relative overflow-hidden">
                           <div className="absolute top-0 left-0 h-full bg-red-400 w-1/3 rounded-full animate-slider-move shadow-[0_0_10px_rgba(248,113,113,0.5)]"></div>
                        </div>
                     </div>

                     {/* 3. Take Profit Slider */}
                     <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200 animate-slide-in-right" style={{animationDelay: '200ms'}}>
                        <div className="flex justify-between mb-2">
                           <div className="text-[10px] text-slate-400 font-bold tracking-wider">TAKE PROFIT</div>
                           <div className="font-mono font-bold text-emerald-500 animate-pulse">+15.0%</div>
                        </div>
                        <div className="h-2 bg-slate-100 rounded-full relative overflow-hidden">
                           <div className="absolute top-0 left-0 h-full bg-emerald-400 w-2/3 rounded-full animate-slider-move-reverse shadow-[0_0_10px_rgba(52,211,153,0.5)]"></div>
                        </div>
                     </div>

                  </div>
                )}

                {/* --- 3. BUILDER VISUAL (UPDATED: STAGGERED ANIMATION) --- */}
                {currentSlide.visualType === 'builder' && (
                  <div className="h-full bg-slate-50 rounded-lg p-6 flex flex-col items-center justify-center relative overflow-hidden">
                     <div className="absolute inset-0" style={{ 
                        backgroundImage: 'radial-gradient(#cbd5e1 1px, transparent 1px)', 
                        backgroundSize: '20px 20px',
                        opacity: 0.5 
                     }}></div>
                     <div className="absolute top-10 right-10 text-orange-400 opacity-10 font-black text-6xl select-none -rotate-12">OR</div>
                     <div className="absolute bottom-10 left-10 text-blue-400 opacity-10 font-black text-6xl select-none rotate-6">ELSE</div>

                     <div className="relative z-10 flex flex-col gap-4 w-full max-w-[320px]">
                        
                        {/* Block 1 */}
                        <div className="bg-white border-l-4 border-blue-500 shadow-md rounded-r-lg p-4 flex items-center gap-4 transform transition-all animate-slide-in-right" style={{animationDelay: '0ms'}}>
                           <div className="bg-blue-100 text-blue-700 font-bold px-2 py-1 rounded text-xs tracking-wider">IF</div>
                           <div className="text-sm font-medium text-slate-700">ä»·æ ¼è·Œç ´ 20 æ—¥å‡çº¿</div>
                        </div>

                        {/* Connection Line 1 */}
                        <div className="h-6 w-0.5 bg-slate-300 ml-8 origin-top animate-grow-height" style={{animationDelay: '300ms'}}></div>

                        {/* Block 2 */}
                        <div className="bg-white border-l-4 border-purple-500 shadow-md rounded-r-lg p-4 flex items-center gap-4 transform transition-all animate-slide-in-right ml-4" style={{animationDelay: '500ms'}}>
                           <div className="bg-purple-100 text-purple-700 font-bold px-2 py-1 rounded text-xs tracking-wider">AND</div>
                           <div className="text-sm font-medium text-slate-700">RSI &lt; 30 (è¶…å–)</div>
                        </div>

                        {/* Connection Line 2 */}
                        <div className="h-6 w-0.5 bg-slate-300 ml-12 origin-top animate-grow-height" style={{animationDelay: '800ms'}}></div>

                        {/* Block 3 */}
                        <div className="bg-white border-l-4 border-emerald-500 shadow-md rounded-r-lg p-4 flex items-center gap-4 transform transition-all animate-slide-in-right ml-8" style={{animationDelay: '1000ms'}}>
                           <div className="bg-emerald-100 text-emerald-700 font-bold px-2 py-1 rounded text-xs tracking-wider">THEN</div>
                           <div className="text-sm font-medium text-slate-700">ä¹°å…¥ $1000 QQQ</div>
                           <CheckCircle2 className="w-4 h-4 text-emerald-500 ml-auto animate-ping" style={{animationDelay: '1500ms', animationDuration: '2s'}} />
                        </div>

                     </div>
                  </div>
                )}

                {/* --- 4. SPEED / BACKTEST VISUAL (UPDATED: BRIGHTER + COUNTDOWN) --- */}
                {currentSlide.visualType === 'speed' && (
                  <div className="animate-fade-in absolute inset-0 flex flex-col items-center justify-center bg-slate-950 overflow-hidden">
                     {/* Brighter, more opaque data streams */}
                     <div className="absolute inset-0 flex flex-col justify-evenly opacity-60 select-none pointer-events-none">
                        <DataStream speed={10} opacity={0.6} color="text-emerald-400" />
                        <DataStream speed={8} opacity={0.8} color="text-emerald-300" direction="reverse" />
                        <DataStream speed={5} opacity={0.4} color="text-cyan-400" />
                        <DataStream speed={12} opacity={0.7} color="text-emerald-200" direction="reverse" />
                        <DataStream speed={6} opacity={0.9} color="text-white" />
                        <DataStream speed={9} opacity={0.5} color="text-cyan-300" direction="reverse" />
                     </div>

                     <div className="relative z-10 flex flex-col items-center">
                        <div className="relative mb-2">
                           <div className="absolute inset-0 rounded-full border-2 border-dashed border-emerald-400/50 animate-[spin_8s_linear_infinite]"></div>
                           <div className="absolute inset-2 rounded-full border-2 border-dotted border-cyan-300/50 animate-[spin_4s_linear_infinite_reverse]"></div>
                           
                           <div className="bg-slate-900/80 backdrop-blur-md px-8 py-6 rounded-2xl border border-emerald-400/80 shadow-[0_0_50px_rgba(52,211,153,0.4)] text-center relative overflow-hidden">
                              {/* Core Pulse */}
                              <div className="absolute inset-0 bg-emerald-400/20 animate-pulse"></div>
                              <div className="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-emerald-300 to-cyan-300 tabular-nums tracking-tighter relative z-10 shadow-white drop-shadow-lg">
                                 <CountDown from={10.0} to={1.2} duration={800} /><span className="text-2xl">s</span>
                              </div>
                           </div>
                        </div>
                        <div className="text-emerald-300 font-mono text-xs tracking-[0.2em] animate-pulse font-bold shadow-emerald-500 drop-shadow-md">PROCESSING 10Y DATA</div>
                     </div>
                  </div>
                )}

                {/* --- 5. ANALYTICS VISUAL --- */}
                {currentSlide.visualType === 'analytics' && (
                  <div className="animate-fade-in h-full bg-slate-50 rounded-lg p-3 flex flex-col gap-3 overflow-hidden relative">
                      <div className="flex items-center justify-between">
                          <div className="flex items-center gap-2">
                              <div className="bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded text-[10px] font-bold">QQQ</div>
                              <span className="text-xs font-bold text-slate-700">Backtest Results</span>
                          </div>
                          <div className="text-[10px] text-slate-400">2020 - 2024</div>
                      </div>

                      <div className="grid grid-cols-2 gap-2">
                          <div className="bg-white p-2 rounded border border-emerald-100 shadow-sm relative overflow-hidden animate-slide-in-up" style={{animationDelay: '100ms'}}>
                              <div className="absolute top-0 left-0 w-1 h-full bg-emerald-500"></div>
                              <div className="text-[9px] text-slate-400 mb-0.5 pl-2">MY STRATEGY</div>
                              <div className="flex justify-between items-end pl-2">
                                  <div>
                                      <div className="text-lg font-bold text-emerald-600 leading-none">+126.4%</div>
                                      <div className="text-[9px] text-emerald-600/70 mt-0.5">Total Return</div>
                                  </div>
                                  <div className="text-right">
                                      <div className="text-xs font-bold text-slate-700">0.83</div>
                                      <div className="text-[9px] text-slate-400">Sharpe</div>
                                  </div>
                              </div>
                          </div>
                          
                          <div className="bg-slate-100/50 p-2 rounded border border-slate-200 relative animate-slide-in-up" style={{animationDelay: '200ms'}}>
                               <div className="text-[9px] text-slate-400 mb-0.5">BENCHMARK (HOLD)</div>
                               <div className="flex justify-between items-end">
                                  <div>
                                      <div className="text-lg font-bold text-slate-500 leading-none">+85.2%</div>
                                      <div className="text-[9px] text-slate-400 mt-0.5">Total Return</div>
                                  </div>
                                  <div className="text-right">
                                      <div className="text-xs font-bold text-slate-500">0.65</div>
                                      <div className="text-[9px] text-slate-400">Sharpe</div>
                                  </div>
                               </div>
                          </div>
                      </div>

                      <div className="flex-1 bg-white rounded border border-slate-100 relative p-2 shadow-inner animate-fade-in" style={{animationDelay: '300ms'}}>
                          <div className="absolute top-2 right-2 flex gap-2 text-[8px]">
                              <div className="flex items-center gap-1"><div className="w-1.5 h-1.5 rounded-full bg-emerald-500"></div>Strategy</div>
                              <div className="flex items-center gap-1"><div className="w-1.5 h-1.5 rounded-full bg-slate-400"></div>Hold</div>
                          </div>

                          <svg className="w-full h-full" viewBox="0 0 300 120" preserveAspectRatio="none">
                              <line x1="0" y1="30" x2="300" y2="30" stroke="#f1f5f9" strokeWidth="1" />
                              <line x1="0" y1="60" x2="300" y2="60" stroke="#f1f5f9" strokeWidth="1" />
                              <line x1="0" y1="90" x2="300" y2="90" stroke="#f1f5f9" strokeWidth="1" />

                              <path d="M0,80 L20,75 L40,85 L60,70 L90,65 L120,75 L150,55 L180,60 L210,50 L240,55 L270,45 L300,40" 
                                    fill="none" stroke="#94a3b8" strokeWidth="1.5" strokeDasharray="3 3" />
                              
                              <path d="M0,80 L20,78 L40,76 L60,70 L90,55 L120,50 L150,40 L180,35 L210,32 L240,25 L270,20 L300,10" 
                                    fill="none" stroke="#8b5cf6" strokeWidth="2" />
                              
                              <defs>
                                  <linearGradient id="chartGrad" x1="0" y1="0" x2="0" y2="1">
                                      <stop offset="0%" stopColor="#8b5cf6" stopOpacity="0.1"/>
                                      <stop offset="100%" stopColor="#8b5cf6" stopOpacity="0"/>
                                  </linearGradient>
                              </defs>
                              <path d="M0,80 L20,78 L40,76 L60,70 L90,55 L120,50 L150,40 L180,35 L210,32 L240,25 L270,20 L300,10 V120 H0 Z" 
                                    fill="url(#chartGrad)" stroke="none" />

                              <path d="M40,90 L44,83 L48,90 Z" fill="#10b981" /> 
                              <path d="M120,80 L124,73 L128,80 Z" fill="#10b981" /> 
                              
                              <path d="M150,35 L154,42 L158,35 Z" fill="#ef4444" />
                          </svg>

                          <div className="absolute top-1/3 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white p-2 rounded shadow-xl text-[10px] z-10 pointer-events-none animate-bounce-subtle">
                              <div className="font-bold border-b border-slate-600 pb-1 mb-1">2023-10-15</div>
                              <div className="flex justify-between gap-3">
                                  <span className="text-emerald-400">My Strategy:</span>
                                  <span>$12,450</span>
                              </div>
                              <div className="flex justify-between gap-3 text-slate-400">
                                  <span>Benchmark:</span>
                                  <span>$10,200</span>
                              </div>
                              <div className="absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800 transform rotate-45"></div>
                          </div>
                      </div>
                  </div>
                )}

                {/* --- 6. RISK VISUAL (UPDATED: SHIELD SCAN) --- */}
                {currentSlide.visualType === 'risk' && (
                  <div className="animate-fade-in flex flex-col items-center justify-center h-full gap-4">
                     <div className="w-24 h-24 bg-orange-50 rounded-full flex items-center justify-center relative overflow-hidden border-2 border-orange-100">
                        <Shield className="w-12 h-12 text-orange-500 relative z-10" />
                        {/* Scanning Effect */}
                        <div className="absolute top-0 left-0 w-full h-1 bg-white/80 shadow-[0_0_10px_white] animate-scan z-20"></div>
                        <div className="absolute -bottom-2 bg-white px-2 py-1 rounded-full shadow-md border border-slate-100 flex items-center gap-1 z-30">
                           <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                           <span className="text-[10px] font-bold text-slate-600">SAFE</span>
                        </div>
                     </div>
                     <div className="grid grid-cols-2 gap-4 w-full">
                        <div className="bg-red-50 p-3 rounded-lg text-center border border-red-100 animate-scale-in" style={{animationDelay: '200ms'}}>
                           <div className="text-[10px] text-red-400 uppercase">Max Drawdown</div>
                           <div className="text-xl font-bold text-red-600">-8.5%</div>
                        </div>
                        <div className="bg-orange-50 p-3 rounded-lg text-center border border-orange-100 animate-scale-in" style={{animationDelay: '400ms'}}>
                           <div className="text-[10px] text-orange-400 uppercase">Recovery Factor</div>
                           <div className="text-xl font-bold text-orange-600">4.2x</div>
                        </div>
                     </div>
                  </div>
                )}

              </div>
            </div>

            {/* --- Floating Elements (Consistent across slides but can change content) --- */}
            
            {/* Top Left Floater */}
            <div 
              className="absolute -top-6 -left-12 w-48 bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border border-slate-100 transform transition-transform duration-700 ease-out group-hover:translate-x-4 group-hover:translate-y-4"
              style={{ transform: 'translateZ(40px)' }}
            >
               <div className="flex items-center gap-3">
                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentSlide.visualType === 'risk' ? 'bg-orange-100 text-orange-600' : 'bg-emerald-100 text-emerald-600'}`}>
                     {currentSlide.visualType === 'builder' ? <Code className="w-4 h-4"/> : 
                      currentSlide.visualType === 'speed' ? <Cpu className="w-4 h-4"/> :
                      currentSlide.visualType === 'risk' ? <Shield className="w-4 h-4"/> :
                      currentSlide.visualType === 'triggers' ? <Settings2 className="w-4 h-4"/> :
                      <TrendingUp className="w-4 h-4"/>}
                  </div>
                  <div>
                     <div className="text-xs font-bold text-slate-700">
                        {currentSlide.visualType === 'speed' ? 'å›æµ‹å®Œæˆ' : 
                         currentSlide.visualType === 'risk' ? 'é£æ§è§¦å‘' : 
                         currentSlide.visualType === 'triggers' ? 'å‚æ•°è°ƒä¼˜' :
                         currentSlide.visualType === 'analytics' ? 'æŠ¥å‘Šç”Ÿæˆ' :
                         currentSlide.visualType === 'builder' ? 'é€»è¾‘æ„å»º' :
                         'ç³»ç»ŸçŠ¶æ€'}
                     </div>
                     <div className="text-[10px] text-slate-400">
                        {currentSlide.visualType === 'speed' ? 'è€—æ—¶ 1.2s' : 
                         currentSlide.visualType === 'triggers' ? 'Tuning...' : 
                         currentSlide.visualType === 'analytics' ? 'Ready' : 
                         currentSlide.visualType === 'builder' ? 'Logic OK' :
                         'Active'}
                     </div>
                  </div>
               </div>
            </div>

          </div>
        </div>

      </div>

      <style>{`
        @keyframes fadeInUp {
          from { opacity: 0; transform: translate3d(0, 20px, 0); }
          to { opacity: 1; transform: translate3d(0, 0, 0); }
        }
        .animate-fade-in-up {
          animation: fadeInUp 0.5s ease-out forwards;
        }
        
        /* New: Staggered slide in from right */
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(20px); }
          to { opacity: 1; transform: translateX(0); }
        }
        .animate-slide-in-right {
          animation: slideInRight 0.5s ease-out forwards;
          opacity: 0; /* Start hidden for stagger */
        }

        /* New: Staggered slide in from bottom for text */
        @keyframes slideInStagger {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in-stagger {
          animation: slideInStagger 0.6s ease-out forwards;
          opacity: 0;
        }

        @keyframes growHeight {
          from { transform: scaleY(0); }
          to { transform: scaleY(1); }
        }
        .animate-grow-height {
          animation: growHeight 0.4s ease-out forwards;
          transform: scaleY(0);
        }

        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-scale-in {
          animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
          opacity: 0;
        }

        @keyframes scan {
          0% { top: -10%; opacity: 0; }
          50% { opacity: 1; }
          100% { top: 110%; opacity: 0; }
        }
        .animate-scan {
          animation: scan 2s ease-in-out infinite;
        }

        @keyframes floatSlow {
          0%, 100% { transform: translate(0, 0); }
          50% { transform: translate(10px, 15px); }
        }
        .animate-float-slow {
          animation: floatSlow 8s ease-in-out infinite;
        }
        
        @keyframes floatSlower {
          0%, 100% { transform: translate(0, 0); }
          50% { transform: translate(-15px, -10px); }
        }
        .animate-float-slower {
          animation: floatSlower 12s ease-in-out infinite;
        }

        .animate-fade-in {
          animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideInUp {
           from { opacity: 0; transform: translateY(10px); }
           to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in-up {
           animation: slideInUp 0.5s ease-out forwards;
           opacity: 0;
        }

        @keyframes bounceSubtle {
           0%, 100% { transform: translate(-50%, 0); }
           50% { transform: translate(-50%, -5px); }
        }
        .animate-bounce-subtle {
           animation: bounceSubtle 3s ease-in-out infinite;
        }

        /* Existing Animations */
        @keyframes dash {
          0% { stroke-dashoffset: 377; }
          50% { stroke-dashoffset: 100; }
          100% { stroke-dashoffset: 377; }
        }
        @keyframes loading {
          0% { width: 0%; transform: translateX(0); }
          50% { width: 100%; transform: translateX(0); }
          100% { width: 0%; transform: translateX(100%); }
        }
        @keyframes scroll {
          from { transform: translateX(0); }
          to { transform: translateX(-50%); }
        }
        .animate-scroll {
          animation: scroll linear infinite;
        }
        .animate-reverse {
          animation-direction: reverse;
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes drawLine {
            0% { stroke-dashoffset: 600; }
            100% { stroke-dashoffset: 0; }
        }
        .animate-draw-line {
            animation: drawLine 3s ease-in-out infinite alternate;
        }
        @keyframes followPath {
            0% { offset-distance: 0%; }
            100% { offset-distance: 100%; }
        }
        .animate-follow-path {
            animation: followPath 3s ease-in-out infinite alternate;
        }
        @keyframes knobTurn {
            0% { transform: rotate(-30deg); }
            50% { transform: rotate(30deg); }
            100% { transform: rotate(-30deg); }
        }
        .animate-knob-turn {
            animation: knobTurn 4s ease-in-out infinite;
        }
        @keyframes sliderMove {
            0% { width: 30%; }
            50% { width: 60%; }
            100% { width: 30%; }
        }
        .animate-slider-move {
            animation: sliderMove 5s ease-in-out infinite;
        }
        @keyframes sliderMoveReverse {
            0% { width: 60%; }
            50% { width: 30%; }
            100% { width: 60%; }
        }
        .animate-slider-move-reverse {
            animation: sliderMoveReverse 6s ease-in-out infinite;
        }
        @keyframes valueSwitch {
            0%, 45% { opacity: 1; transform: translateY(0); }
            50%, 100% { opacity: 0; transform: translateY(-10px); }
        }
        .animate-value-switch {
            animation: valueSwitch 4s infinite;
        }
        @keyframes valueSwitchAlt {
            0%, 45% { opacity: 0; transform: translateY(10px); }
            50%, 100% { opacity: 1; transform: translateY(0); }
        }
        .animate-value-switch-alt {
            animation: valueSwitchAlt 4s infinite;
        }
      `}</style>
    </div>
  );
}

// Helper component for metrics
const MetricBox = ({ label, value, color }) => (
  <div className="bg-slate-50 p-3 rounded-lg">
    <div className="text-[10px] text-slate-400">{label}</div>
    <div className={`text-lg font-bold ${color}`}>{value}</div>
  </div>
);
```